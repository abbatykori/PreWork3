<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Videos - Team 2</title>
	<link type="text/css" media="all" rel="stylesheet" href="fonts/font-awesome/css/font-awesome.min.css">
	<link type="text/css" media="all" rel="stylesheet" href="styles/ionicons.min.css">
	<link type="text/css" media="all" rel="stylesheet" href="styles/font.css" >
	<link type="text/css" media="all" rel="stylesheet" href="styles/main.css">
	<link type="text/css" media="all" rel="stylesheet" href="styles/grid.css">
</head>

<body>

	<!-- header -->
	<header class="main-header clearfix mrg-btm-20">

		<!-- container-auto -->
		<section class="container-auto clearfix">

			<!-- logo -->
			<div class="logo pull-left"><a href="./"><h2>ProJaro Music Inc</h2></a></div>
			<!-- /logo -->

			<!-- nav -->
			<nav class="nav pull-right">

				<ul class="clearfix">
					<li><a href="index.html">Home</a></li>
					<li><a href="about.html">About Us</a></li>
					<li><a href="videos.html">Videos</a></li>
					<li><a href="audios.html">Audios</a></li>
					<li><a href="contact.html">Contact</a></li>
				</ul>

			</nav>
			<!-- /nav -->

		</section>
		<!-- /container-auto -->

	</header>
	<!-- /header -->





	<!-- container-auto -->
	<section class="container-auto clearfix">
		<!-- grid-row -->
		<div class="grid-row">
			<!-- column-7 -->
			<div class="column-7 page-intro transparent-bg">
				<h1>Videos</h1>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis incidunt.</p>
			</div>
			<div class="column-7">
				<!-- latest-videos -->
				<div class="">
					<figure id="video_player">
						<div id="video_container">
							<video controls poster="videos/alleyes.jpg">
								<source src="videos/video01.mp4" type="video/mp4">
									</video>
								</div>
								<figcaption>
									<a href="video01.mp4" class="currentvid">
										<img src="videos/alleyes.jpg" alt="Nicki Minaj / Meek Mill">
									</a>
									<a href="video02.mp4">
										<img src="videos/weekend.jpg" alt="Weekend">
									</a>
									<a href="video03.mp4">
										<img src="videos/whip.jpg" alt="Silento -Whip">
									</a><!-- 
									<a href="video04.mp4">
										<img src="videos/downtown.jpg" alt="Downtown - Macklemore">
									</a> -->
								</figcaption>
							</figure>
						</div>
						<!-- /latest-videos -->
					</div>
					<!-- /column-7 -->
				</div>
				<!-- /grid-row -->
			</section>
			<!--/container-auto -->

			<!-- footer -->
			<footer class="footer">

				<!-- container-auto -->
				<section class="container-auto"></section>
				<!-- /container-auto -->

			</footer>
			<!-- /footer -->

			<script>
				var video_player = document.getElementById("video_player");
				video = video_player.getElementsByTagName("video")[0],
				video_links = video_player.getElementsByTagName("figcaption")[0],
				source = video.getElementsByTagName("source"),
				link_list = [],
				vidDir = "/videos",
				currentVid = 0,
				allLnks = video_links.children,
				lnkNum = allLnks.length;
				video.removeAttribute("controls");
				video.removeAttribute("poster");

				(function() {
				function playVid(index) {
				 video_links.children[index].classList.add("currentvid");
				    source[1].src = vidDir + link_list[index] + ".webm";  
					source[0].src = vidDir + link_list[index] + ".mp4";
				    currentVid = index;
				    video.load();
					video.play();
				}

				for (var i=0; i<lnkNum; i++) {
				var filename = allLnks[i].href;
				link_list[i] = filename.match(/([^\/]+)(?=\.\w+$)/)[0];
				(function(index){
				        allLnks[i].onclick = function(i){
				        i.preventDefault();  
						for (var i=0; i<lnkNum; i++) {
						allLnks[i].classList.remove("currentvid");
						}
						playVid(index);
				        }    
				    })(i);
				}
				video.addEventListener('ended', function () {
				    allLnks[currentVid].classList.remove("currentvid");
				    if ((currentVid + 1) >= lnkNum) { nextVid = 0 } else { nextVid = currentVid+1 }
				    playVid(nextVid);
				})

				video.addEventListener('mouseenter', function() {
				    video.setAttribute("controls","true");
				})

				video.addEventListener('mouseleave', function() {
				    video.removeAttribute("controls");
				})

				var indexOf = function(needle) {
				    if(typeof Array.prototype.indexOf === 'function') {
				        indexOf = Array.prototype.indexOf;
				    } else {
				        indexOf = function(needle) {
				            var i = -1, index = -1;
							for(i = 0; i < this.length; i++) {
				                if(this[i] === needle) {
				                    index = i;
				                    break;
				                }}
				            return index;
				        };}
				    return indexOf.call(this, needle);
				};
				 	var focusedLink = document.activeElement;
				 	index = indexOf.call(allLnks, focusedLink);
				 	
				document.addEventListener('keydown', function(e) {
				if (index) {
					var focusedElement = document.activeElement;
				    if (e.keyCode == 40 || e.keyCode == 39) { // down or right cursor
				    var nextNode = focusedElement.nextElementSibling;
				    if (nextNode) { nextNode.focus(); } else { video_links.firstElementChild.focus(); }
				    }
				   if (e.keyCode == 38 || e.keyCode == 37) { // up or left cursor
				    var previousNode = focusedElement.previousElementSibling;
				    if (previousNode) { previousNode.focus(); } else { video_links.lastElementChild.focus(); }
				    }
				 }
				});

				})();  

			</script>


		</body>
		</html>
